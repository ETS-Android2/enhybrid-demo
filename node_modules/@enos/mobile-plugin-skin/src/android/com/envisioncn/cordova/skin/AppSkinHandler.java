package com.envisioncn.cordova.skin;

import android.content.Context;

import skin.support.SkinCompatManager;

public class AppSkinHandler {
    public static String APP_SKIN = null;

    private Context context;

    public AppSkinHandler(Context context) {
        this.context = context;
    }

    public String getCurrentSkin(){
        String appSkin = null;
        if (APP_SKIN != null) {
            appSkin = APP_SKIN;
        } else if (SkinCompatManager.getInstance().getCurSkinName() != null && !SkinCompatManager.getInstance().getCurSkinName().equals("")) {
            appSkin = SkinCompatManager.getInstance().getCurSkinName();
            APP_SKIN = appSkin;
        }
        return appSkin;
    }

    public String getSkinCookie() {
        String cookieValue = "";
        String appSkin = getCurrentSkin();
        if (appSkin == null || appSkin.equals("default")) {
            cookieValue = "theme=theme-dark";
        } else {
            cookieValue = "theme=theme-light";
        }
        return cookieValue;
    }

    public void changeSkin(String skinType) {
        APP_SKIN = skinType;
        SkinCompatManager.getInstance().loadSkin(skinType, SkinCompatManager.SKIN_LOADER_STRATEGY_BUILD_IN);
    }
}
