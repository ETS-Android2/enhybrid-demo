#import <Cordova/CDVPluginResult.h>
#import "SwitchSkinPlugin.h"
#import "TXSakuraKit.h"

@implementation SwitchSkinPlugin
- (void)switchSkin:(CDVInvokedUrlCommand*)command {
    NSString *skin = [command argumentAtIndex:0];
    if ([skin isEqualToString:@"theme-light"]) {
        [TXSakuraManager registerLocalSakuraWithNames:@[@"light"]];
        NSString *name = @"light";
        NSInteger type = [TXSakuraManager getSakuraCurrentType];
        [TXSakuraManager shiftSakuraWithName:name type:type];
    }else {
        [TXSakuraManager registerLocalSakuraWithNames:@[@"default"]];
        NSString *name = @"default";
        NSInteger type = [TXSakuraManager getSakuraCurrentType];
        [TXSakuraManager shiftSakuraWithName:name type:type];
    }
    CDVPluginResult* pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK];
    [self.commandDelegate sendPluginResult:pluginResult callbackId:command.callbackId];
}
@end
